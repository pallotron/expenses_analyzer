/* A simple CSS file for the expenses app */
Screen {
    layout: vertical;
}

.main_content {
    height: 1fr;
    padding: 1;
}

.title {
    text-align: center;
    padding: 1;
    text-style: bold;
    height: auto;
}

#filters {
    layout: horizontal;
    padding: 1 0;
    height: auto;
}

#filters > Input {
    width: 1fr;
    margin: 0 1;
}

.total {
    padding: 0 2;
    text-align: right;
    text-style: bold;
}

#left_pane, #right_pane {
    width: 1fr;
}

.table_title {
    text-align: center;
    padding: 1;
    text-style: bold;
}

#summary_selectors {
    margin-top: 1;
}

/* --- Custom Table Styles --- */
DataTable .datatable--header {
    background: lightskyblue;
    color: black;
    text-style: bold;
}

/* Highlight cells in the header that are affected by cursor (when cursor_type="row" or "column") */
DataTable .datatable--header-cursor {
    background: $accent-darken-2;
}

/* Row hover effect - subtle highlight when mouse hovers over a row */
DataTable .datatable--hover {
    background: $accent-darken-3;
}

/* Highlight the specific cell where the cursor is (more prominent) */
DataTable .datatable--cursor {
    background: $accent-lighten-1;
    color: $text;
    text-style: bold;
}

/* Zebra stripes - use correct Textual class names */
DataTable .datatable--odd-row {
    background: $surface-darken-2;
}

DataTable .datatable--even-row {
    background: $surface;
}

/* --- Categorize Screen --- */
#controls_container {
    height: auto;
    padding: 0 1;
}

#categorization_table {
    height: 1fr;
    border: solid $primary;
    padding: 0 1;
}

#categorization_table:focus-within {
    border: solid $success;
}

#category_suggestions_list {
    max-height: 10;
    width: 40;
    border: thick $accent;
}

.filter-bar {
    height: auto;
    padding: 1 0;
}

.filter-bar > Input {
    width: 1fr;
    margin: 0 1;
}

.action-bar {
    height: auto;
}

.action-bar > Input {
    width: 2fr;
    margin: 0 1;
}

.action-bar > Button {
    width: 1fr;
    margin: 0 1;
}

.help-text {
    text-align: center;
    padding: 1;
}

/* --- Notification --- */
Notification {
    visibility: hidden;
    height: auto;
    padding: 1 2;
    background: $success;
    color: $text;
    border: thick $background;
    dock: top;
    layer: top;
    offset-x: 100%;
    transition: offset 500ms in_out_cubic;
}

Notification.visible {
    visibility: visible;
    offset-x: 0;
}

/* --- Summary Screen --- */
.source-filter-bar {
    height: 3;
    padding: 0 1;
    align: left middle;
}

.source-filter-bar .filter-label {
    width: auto;
    padding: 0 1;
}

.source-filter-bar Checkbox {
    width: auto;
    margin: 0 1;
    padding: 0;
}

.source-filter-bar Button {
    width: auto;
    min-width: 8;
    height: 3;
    margin: 0 1;
}

#year_tabs {
    height: 1fr; /* Allow year tabs to take all available vertical space */
}

#year_tabs .tab-pane {
    layout: vertical;
    height: 1fr; /* Ensure tab panes also fill vertical space */
}

/* Target TabbedContent and TabPane within SummaryScreen for month tabs */
SummaryScreen TabbedContent {
    height: 1fr;
}

SummaryScreen TabbedContent TabPane {
    layout: vertical;
    height: 1fr;
}

.summary-grid {
    padding: 1;
    height: 1fr; /* Allow the grid to fill the available space */
}

.category-breakdown, .monthly-breakdown, .single_month_container {
    height: 1fr; /* Make containers fill their parent's height */
    width: 1fr;
    border: solid $primary;
    padding: 0 1;
}

.category-breakdown:focus-within,
.monthly-breakdown:focus-within,
.single_month_container:focus-within {
    border: solid $success;
}

.expense-column, .income-column {
    border: solid $primary;
    padding: 0 1;
}

.expense-column:focus-within, .income-column:focus-within {
    border: solid $success;
}

.category-breakdown > DataTable,
.monthly-breakdown > DataTable,
.single_month_container > DataTable {
    height: 1fr;
    width: 1fr;
}

.category-breakdown {
    width: 60;
}

.expense-breakdown, .expense-column {
    width: 80;
}

.income-breakdown, .income-column {
    width: 60;
}

.monthly-breakdown {
    width: 1fr;
}

/* --- Compact Mode for All Year tab only (toggled with Ctrl+M) --- */
.all-year-container.compact .summary-grid {
    padding: 0;
}

.all-year-container.compact .table_title {
    padding: 0;
    height: 1;
}

.all-year-container.compact .expense-breakdown {
    width: 50;
}

.all-year-container.compact .income-breakdown {
    width: 40;
}

.all-year-container.compact .category-breakdown {
    width: 40;
}

.all-year-container.compact .cash-flow-summary {
    padding: 0;
    height: 1;
}

.all-year-container.compact .category-breakdown,
.all-year-container.compact .monthly-breakdown {
    padding: 0;
}

/* --- Focus Mode (toggle with 'f' key) --- */
.panel-hidden {
    display: none;
}

.panel-focused {
    width: 1fr;
}

/* --- Transaction Screen --- */
TransactionScreen .content-split {
    width: 1fr;
    height: 1fr;
}

#transaction_table {
    width: 3fr;
    height: 1fr;
    margin-right: 1;
    border: solid $primary;
    padding: 0 1;
}

#transaction_table:focus-within {
    border: solid $success;
}

TransactionScreen .merchant-summary {
    width: 2fr;
    height: 1fr;
    margin-left: 1;
    border: solid $primary;
    padding: 0 1;
}

TransactionScreen .merchant-summary:focus-within {
    border: solid $success;
}

TransactionScreen .merchant-summary > DataTable {
    height: 1fr;
}

TransactionScreen .button-bar {
    height: auto;
    padding: 1 0;
}

TransactionScreen .button-bar > Static {
    width: 1fr;
}

TransactionScreen .button-bar > Button {
    width: auto;
    margin: 0 1;
}

/* --- Build Delete Screen --- */
BuildDeleteScreen #table_scroll {
    height: 1fr;
    min-height: 20;
    border: solid $primary;
    padding: 0 1;
}

BuildDeleteScreen #table_scroll:focus-within {
    border: solid $success;
}

BuildDeleteScreen #preview_table {
    height: 100%;
}

BuildDeleteScreen .button-bar {
    height: auto;
    padding: 1 0;
}

BuildDeleteScreen .button-bar > Button {
    width: 1fr;
    margin: 0 1;
}

/* --- Confirmation Dialog --- */
ConfirmationScreen {
    align: center middle;
}

ConfirmationScreen #dialog {
    width: 60;
    height: auto;
    min-height: 15;
    max-height: 30;
    background: $surface;
    border: thick $primary;
    padding: 2;
}

ConfirmationScreen #question {
    width: 100%;
    height: auto;
    text-align: center;
    padding: 2 1;
    margin-bottom: 1;
}

ConfirmationScreen #button_container {
    width: 100%;
    height: auto;
    align-horizontal: center;
    padding: 1 0;
}

ConfirmationScreen #button_container > Button {
    min-width: 15;
    margin: 0 2;
}

ConfirmationScreen #help_text {
    width: 100%;
    height: auto;
    text-align: center;
    padding: 1;
    color: $text-muted;
    text-style: italic;
}

/* --- Import Screen --- */
#file_preview {
    border: solid $primary;
    padding: 0 1;
}

#file_preview:focus-within {
    border: solid $success;
}

/* --- Backup Screen --- */
#backups_table {
    border: solid $primary;
    padding: 0 1;
}

#backups_table:focus-within {
    border: solid $success;
}

/* --- TrueLayer Screen --- */
#transaction_preview {
    border: solid $primary;
    padding: 0 1;
}

#transaction_preview:focus-within {
    border: solid $success;
}

#connections_list {
    border: solid $primary;
    padding: 0 1;
}

#connections_list:focus-within {
    border: solid $success;
}

#accounts_container {
    border: solid $primary;
    padding: 0 1;
}

#accounts_container:focus-within {
    border: solid $success;
}

/* --- Budget Types Screen --- */
#category_types_table {
    height: 1fr;
    border: solid $primary;
    padding: 0 1;
}

#category_types_table:focus-within {
    border: solid $success;
}

.cash-flow-summary {
    height: auto;
    padding: 0 1;
}